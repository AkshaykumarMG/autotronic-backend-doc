<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>back-auto-tronic documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">back-auto-tronic documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content controller">
                   <div class="content-data">





<ol class="breadcrumb">
  <li class="breadcrumb-item">Controllers</li>
  <li class="breadcrumb-item" >InquiryController</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/modules/inquiry/inquiry.controller.ts</code>
        </p>

            <p class="comment">
                <h3>Prefix</h3>
            </p>
            <p class="comment">
                <code>inquiry</code>
            </p>






            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#create" >create</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#findAll" >findAll</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#findAllByUser" >findAllByUser</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#findOne" >findOne</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#remove" >remove</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#update" >update</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#updateInquiryTimeline" >updateInquiryTimeline</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="create"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>create</b></span>
                        <a href="#create"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>create(createInquiryDto: <a href="../classes/CreateInquiryDto.html" target="_self">CreateInquiryDto</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Post()<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="34"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:34</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Creates a new inquiry based on the provided data.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>createInquiryDto</td>
                                            <td>
                                                            <code><a href="../classes/CreateInquiryDto.html" target="_self" >CreateInquiryDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The data transfer object containing the details for creating a new inquiry.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to an object indicating the success status of the operation.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAll"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>findAll</b></span>
                        <a href="#findAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAll(user: <a href="../interfaces/ICurrentUser.html" target="_self">ICurrentUser</a>, status: <a href="../undefineds/InquiryStatus.html" target="_self">InquiryStatus</a>, page: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, limit: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Get(&#x27;:status&#x27;)<br />@ApiCookieAuth()<br />@ApiParam({name: &#x27;status&#x27;, required: true, enum: InquiryStatus})<br />@UseGuards(AuthGuard, RoleGuard)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="53"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:53</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Retrieves all inquiries based on the provided status, with pagination.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>user</td>
                                            <td>
                                                            <code><a href="../interfaces/ICurrentUser.html" target="_self" >ICurrentUser</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The current authenticated user.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>status</td>
                                            <td>
                                                            <code><a href="../miscellaneous/enumerations.html#InquiryStatus" target="_self" >InquiryStatus</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The status of inquiries to retrieve, as defined in InquiryStatus enum.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>page</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The page number for pagination (as a string, will be converted to number).</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>limit</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The number of items per page for pagination (as a string, will be converted to number).</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to the paginated list of inquiries matching the given status.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAllByUser"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>findAllByUser</b></span>
                        <a href="#findAllByUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAllByUser(id: Types.ObjectId, status: <a href="../undefineds/StoreStatus.html" target="_self">StoreStatus</a>, page: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, limit: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Get(&#x27;store/:id/:status&#x27;)<br />@ApiCookieAuth()<br />@ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27;})<br />@ApiParam({name: &#x27;status&#x27;, required: true, enum: StoreStatus})<br />@UseGuards(AuthGuard, RoleGuard)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="90"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:90</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Retrieves all inquiries for a specific store based on the provided store ID and status, with pagination.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">        This should be a valid MongoDB ObjectId.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                        <code>Types.ObjectId</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The unique identifier of the store.
This should be a valid MongoDB ObjectId.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>status</td>
                                            <td>
                                                            <code><a href="../miscellaneous/enumerations.html#StoreStatus" target="_self" >StoreStatus</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The status of the store, as defined in the StoreStatus enum.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>page</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The page number for pagination (as a string, will be converted to number).</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>limit</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The number of items per page for pagination (as a string, will be converted to number).</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to the paginated list of inquiries for the specified store and status.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findOne"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>findOne</b></span>
                        <a href="#findOne"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findOne(id: Types.ObjectId)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Get(&#x27;timeline/:id&#x27;)<br />@ApiCookieAuth()<br />@ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27;})<br />@UseGuards(AuthGuard, RoleGuard)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="71"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:71</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Retrieves the timeline for a specific inquiry.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">        This should be a valid MongoDB ObjectId.

     The exact structure of the returned data depends on the implementation
     of the inquiryService.findOne method.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                        <code>Types.ObjectId</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The unique identifier of the inquiry.
This should be a valid MongoDB ObjectId.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to the timeline data for the specified inquiry.
The exact structure of the returned data depends on the implementation
of the inquiryService.findOne method.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="remove"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>remove</b></span>
                        <a href="#remove"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>remove(id: Types.ObjectId)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Delete(&#x27;:id&#x27;)<br />@ApiCookieAuth()<br />@ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27;})<br />@UseGuards(AuthGuard, RoleGuard)<br />@Roles(UserRole.SuperAdmin, UserRole.Admin)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="149"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:149</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Removes a specific inquiry from the system.
This endpoint is protected and can only be accessed by SuperAdmin or Admin roles.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">        This should be a valid MongoDB ObjectId.
     { success: true } is returned if the removal was successful.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                        <code>Types.ObjectId</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The unique identifier of the inquiry to be removed.
This should be a valid MongoDB ObjectId.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to an object indicating the success status of the operation.
{ success: true } is returned if the removal was successful.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>update</b></span>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>update(id: Types.ObjectId, updateStatusInquiryDto: <a href="../classes/UpdateStatusInquiryDto.html" target="_self">UpdateStatusInquiryDto</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Patch(&#x27;:id&#x27;)<br />@ApiCookieAuth()<br />@ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27;})<br />@UseGuards(AuthGuard, RoleGuard)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="131"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:131</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Updates an existing inquiry with the provided data.
This endpoint is protected and requires authentication.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">        This should be a valid MongoDB ObjectId.
                            This includes the new status and any other fields that need to be updated.
     The exact structure of the returned data depends on the implementation
     of the inquiryService.update method.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                        <code>Types.ObjectId</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The unique identifier of the inquiry to be updated.
This should be a valid MongoDB ObjectId.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>updateStatusInquiryDto</td>
                                            <td>
                                                            <code><a href="../classes/UpdateStatusInquiryDto.html" target="_self" >UpdateStatusInquiryDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Data transfer object containing the updated information for the inquiry.
This includes the new status and any other fields that need to be updated.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to the updated inquiry object.
The exact structure of the returned data depends on the implementation
of the inquiryService.update method.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateInquiryTimeline"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>updateInquiryTimeline</b></span>
                        <a href="#updateInquiryTimeline"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateInquiryTimeline(user: <a href="../interfaces/ICurrentUser.html" target="_self">ICurrentUser</a>, id: Types.ObjectId, manageInquiryStatusDto: <a href="../classes/ManageInquiryStatusDto.html" target="_self">ManageInquiryStatusDto</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Patch(&#x27;status/:id&#x27;)<br />@ApiCookieAuth()<br />@ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27;})<br />@UseGuards(AuthGuard, RoleGuard)<br />@Roles(UserRole.SuperAdmin, UserRole.Admin, UserRole.Dealer)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="109"
                                    class="link-to-prism">src/modules/inquiry/inquiry.controller.ts:109</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Updates the timeline of a specific inquiry with new status information.
This endpoint is protected and can only be accessed by SuperAdmin, Admin, or Dealer roles.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">     { success: true } is returned if the update was successful.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>user</td>
                                            <td>
                                                            <code><a href="../interfaces/ICurrentUser.html" target="_self" >ICurrentUser</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The current authenticated user, obtained from the</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                        <code>Types.ObjectId</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The unique identifier of the inquiry to be updated. This should be a valid MongoDB ObjectId.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>manageInquiryStatusDto</td>
                                            <td>
                                                            <code><a href="../classes/ManageInquiryStatusDto.html" target="_self" >ManageInquiryStatusDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Data transfer object containing the new status information for the inquiry.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves to an object indicating the success status of the operation.
{ success: true } is returned if the update was successful.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Controller, Get, Post, Body, Patch, Param, Delete, Query, UseGuards } from &#x27;@nestjs/common&#x27;;
import { InquiryService } from &#x27;./inquiry.service&#x27;;
import { CreateInquiryDto } from &#x27;./dto/create-inquiry.dto&#x27;;
import { UpdateInquiryDto } from &#x27;./dto/update-inquiry.dto&#x27;;
import { UpdateStatusInquiryDto } from &#x27;./dto/update-status-inquiry.dto&#x27;;

// mongoose
import { Types } from &#x27;mongoose&#x27;;

// verify user by credential and role
import { AuthGuard } from &#x27;../../utilities/guard/auth/auth.guard&#x27;;
import { Roles } from &#x27;../user/role/role.decorator&#x27;;
import { UserRole } from &#x27;../user/schema/user.schema&#x27;;
import { RoleGuard } from &#x27;../../utilities/guard/role/role.guard&#x27;;
import { CurrentUser, ICurrentUser } from &#x27;../user/decorator/current-user.decorator&#x27;;
import { StoreStatus } from &#x27;../store/schema/store.schema&#x27;;
import { InquiryStatus } from &#x27;./schema/inquiry.schema&#x27;;
import { ManageInquiryStatusDto } from &#x27;./dto/manage-inquiry-status.dto&#x27;;

// swagger cookie
import { ApiCookieAuth, ApiParam } from &#x27;@nestjs/swagger&#x27;;

@Controller(&#x27;inquiry&#x27;)
export class InquiryController {
  constructor(private readonly inquiryService: InquiryService) { }

  /**
   * Creates a new inquiry based on the provided data.
   * 
   * @param createInquiryDto - The data transfer object containing the details for creating a new inquiry.
   * @returns A promise that resolves to an object indicating the success status of the operation.
   */
  @Post()
  async create(@Body() createInquiryDto: CreateInquiryDto) {
    await this.inquiryService.create(createInquiryDto);
    return { success: true };
  }

  /**
   * Retrieves all inquiries based on the provided status, with pagination.
   * 
   * @param user - The current authenticated user.
   * @param status - The status of inquiries to retrieve, as defined in InquiryStatus enum.
   * @param page - The page number for pagination (as a string, will be converted to number).
   * @param limit - The number of items per page for pagination (as a string, will be converted to number).
   * @returns A promise that resolves to the paginated list of inquiries matching the given status.
   */
  @Get(&#x27;:status&#x27;)
  @ApiCookieAuth()
  @ApiParam({name: &#x27;status&#x27;, required: true, enum: InquiryStatus })
  @UseGuards(AuthGuard, RoleGuard)
  // @Roles(UserRole.SuperAdmin, UserRole.Admin)
  async findAll(@CurrentUser() user: ICurrentUser, @Param(&#x27;status&#x27;) status: InquiryStatus, @Query(&#x27;page&#x27;) page: string, @Query(&#x27;limit&#x27;) limit: string) {
    return await this.inquiryService.findAll(user, status, page, limit);
  }

  /**
   * Retrieves the timeline for a specific inquiry.
   * 
   * @param id - The unique identifier of the inquiry.
   *             This should be a valid MongoDB ObjectId.
   * 
   * @returns A promise that resolves to the timeline data for the specified inquiry.
   *          The exact structure of the returned data depends on the implementation
   *          of the inquiryService.findOne method.
   */
  @Get(&#x27;timeline/:id&#x27;)
  @ApiCookieAuth()
  @ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27; })
  @UseGuards(AuthGuard, RoleGuard)
  async findOne(@Param(&#x27;id&#x27;) id: Types.ObjectId) {
    return await this.inquiryService.findOne(id);
  }

  /**
   * Retrieves all inquiries for a specific store based on the provided store ID and status, with pagination.
   *
   * @param id - The unique identifier of the store.
   *             This should be a valid MongoDB ObjectId.
   * @param status - The status of the store, as defined in the StoreStatus enum.
   * @param page - The page number for pagination (as a string, will be converted to number).
   * @param limit - The number of items per page for pagination (as a string, will be converted to number).
   * @returns A promise that resolves to the paginated list of inquiries for the specified store and status.
   */
  @Get(&#x27;store/:id/:status&#x27;)
  @ApiCookieAuth()
  @ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27; })
  @ApiParam({name: &#x27;status&#x27;, required: true, enum: StoreStatus })
  @UseGuards(AuthGuard, RoleGuard)
  async findAllByUser(@Param(&#x27;id&#x27;) id: Types.ObjectId, @Param(&#x27;status&#x27;) status: StoreStatus, @Query(&#x27;page&#x27;) page: string, @Query(&#x27;limit&#x27;) limit: string) {
    return await this.inquiryService.findAllByStore(id, status, page, limit);
  }

  /**
   * Updates the timeline of a specific inquiry with new status information.
   * This endpoint is protected and can only be accessed by SuperAdmin, Admin, or Dealer roles.
   *
   * @param user - The current authenticated user, obtained from the @CurrentUser() decorator.
   * @param id - The unique identifier of the inquiry to be updated. This should be a valid MongoDB ObjectId.
   * @param manageInquiryStatusDto - Data transfer object containing the new status information for the inquiry.
   * @returns A promise that resolves to an object indicating the success status of the operation.
   *          { success: true } is returned if the update was successful.
   */
  @Patch(&#x27;status/:id&#x27;)
  @ApiCookieAuth()
  @ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27; })
  @UseGuards(AuthGuard, RoleGuard)
  @Roles(UserRole.SuperAdmin, UserRole.Admin, UserRole.Dealer)
  async updateInquiryTimeline(@CurrentUser() user: ICurrentUser, @Param(&#x27;id&#x27;) id: Types.ObjectId, @Body() manageInquiryStatusDto: ManageInquiryStatusDto) {
    manageInquiryStatusDto.user &#x3D; user._id
    await this.inquiryService.updateInquiryTimeline(id, manageInquiryStatusDto);
    return { success: true }
  }

  /**
   * Updates an existing inquiry with the provided data.
   * This endpoint is protected and requires authentication.
   *
   * @param id - The unique identifier of the inquiry to be updated.
   *             This should be a valid MongoDB ObjectId.
   * @param updateStatusInquiryDto - Data transfer object containing the updated information for the inquiry.
   *                                 This includes the new status and any other fields that need to be updated.
   * @returns A promise that resolves to the updated inquiry object.
   *          The exact structure of the returned data depends on the implementation
   *          of the inquiryService.update method.
   */
  @Patch(&#x27;:id&#x27;)
  @ApiCookieAuth()
  @ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27; })
  @UseGuards(AuthGuard, RoleGuard)
  async update(@Param(&#x27;id&#x27;) id: Types.ObjectId, @Body() updateStatusInquiryDto: UpdateStatusInquiryDto) {
    return await this.inquiryService.update(id, updateStatusInquiryDto);
  }

  /**
   * Removes a specific inquiry from the system.
   * This endpoint is protected and can only be accessed by SuperAdmin or Admin roles.
   *
   * @param id - The unique identifier of the inquiry to be removed.
   *             This should be a valid MongoDB ObjectId.
   * @returns A promise that resolves to an object indicating the success status of the operation.
   *          { success: true } is returned if the removal was successful.
   */
  @Delete(&#x27;:id&#x27;)
  @ApiCookieAuth()
  @ApiParam({name: &#x27;id&#x27;, required: true, type: &#x27;string&#x27; })
  @UseGuards(AuthGuard, RoleGuard)
  @Roles(UserRole.SuperAdmin, UserRole.Admin)
  async remove(@Param(&#x27;id&#x27;) id: Types.ObjectId) {
    await this.inquiryService.remove(id);
    return { success: true };
  }
}
</code></pre>
    </div>
</div>
















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'controller';
            var COMPODOC_CURRENT_PAGE_URL = 'InquiryController.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
